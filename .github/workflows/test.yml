name: Test

on:
  workflow_dispatch:
  push:
    branches: 
      - "**"

jobs:
  main-job:
    runs-on: windows-latest
    steps:
    - name: 
      run: curl -LO https://aka.ms/vs/17/release/vs_buildtools.exe

    - name: 
      run: |
        .\vs_buildtools.exe --quiet --wait --norestart --nocache ^
        --installPath C:\BuildTools ^
        --add Microsoft.VisualStudio.Workload.VCTools ^
        --add Microsoft.VisualStudio.Component.Windows10SDK.22621 ^
        --includeRecommended
        IF %ERRORLEVEL% EQU 3010 EXIT 0
      shell: cmd
    - name: 
      uses: actions/upload-artifact@v4
      with: 
        path: C:\BuildTools